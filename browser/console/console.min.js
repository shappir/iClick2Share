var ic2s;
(function(g,d,l){var e=g.utils||(g.utils={});e.noop=function(){};e.retArg=function(a){return a};e.toArray=function(){var a=Array.prototype.slice;return function(b,c,f){c=c||0;if(!f)return a.call(b,c);var e=0,k=b.length;for(f.length=k-c;c<k;)f[e++]=b[c++];return f}}();e.toArrayFactory=function(a){var b=e.toArray;a=a||[];return function(c,f){return b(c,f,a)}};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=e.toArray(arguments,1);return function(){return b.apply(a,c.concat(e.toArray(arguments)))}});
e.iter=function(a,b){var c;if("hasOwnProperty"in a)for(c in a)a.hasOwnProperty(c)&&b.call(a,c,a[c],a);else for(c in a)b.call(a,c,a[c],a)};e.timeLabel=function(){var a=new Date,b=a.toString();return b.substring(0,b.indexOf("GMT")-1)+":"+("00"+a.getMilliseconds()).slice(-3)};e.Prop=function(){var a=function(){for(var b=["WebKit","Moz","MS","O"],c=b.length,a=0;a<c;++a)b.push(b[a].toLowerCase());return b}();return{getName:function(){var b={};return function(c,f){if(!c)return null;if(f in b)return b[f];
if(f in c)return b[f]=f;for(var e=f.charAt(0).toUpperCase()+f.slice(1),k=0;k<a.length;++k){var m=a[k]+e;if(m in c)return b[f]=m}return null}}(),get:function(b,c,a){return(c=this.getName(b,c))?b[c]:a},set:function(b,c,a){c=this.getName(b,c);b[c]=a}}}();e.requestAnimationFrame=function(){var a=e.Prop.get(d,"requestAnimationFrame");return a&&a.bind(d)}();e.schedule=function(a){e.requestAnimationFrame?e.requestAnimationFrame(a):a()};e.getPrefix=function(){var a;return function(){if(!a)for(var b=d.getComputedStyle(l.body),
c=0;c<b.length;++c)if(45===b[c].charCodeAt(0)){var f=b[c].match(/-([^-]+)-/);f&&(a=f[1])}return a}}();String.prototype.delta=function(a){if(this==a)return null;if(0===this.length)return[a];for(var b=0;b<this.length&&b<a.length&&this.charCodeAt(b)===a.charCodeAt(b);++b);for(var c=this.length-1,f=a.length-1;c>b&&f>b&&this.charCodeAt(c)===a.charCodeAt(f);--c,--f);return[a.substring(b,f+1),b,c+1]};Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});e.clone=function(a,b){b=b||
Object.create(null);e.iter(a,function(c,a){b[c]=a});return b};e.delta=function(a){a=a||"";return function(b){var c=a.delta(b);a=b;return c}};e.merge=function(a){a=a||"";return function(b){return a=1===b.length?b[0]:a.substring(0,b[1])+b[0]+a.substring(b[2])}};e.asyncIter=function(a,b,c){function f(){0===--k&&c.call(e,a)}for(var e=this,k=1,m=0;m<a.length;){++k;var d=a[m];b(a[m],f,m,a)&&--k;d===a[m]&&++m}f()};e.eventSource=function(a){var b=Object.create(null),c=[];a=a||Object.create(null);a.on=function n(a,
c){if("string"===typeof a){var d=b[a]||(b[a]=[]);c&&-1===d.indexOf(c)&&d.push(c)}else e.iter(a,n);return this};a.off=function k(a,d){var g;if("string"===typeof a)if(d){var h=b[a];h&&(g=h.indexOf(d),-1!==g&&h.splice(g,1))}else delete b[a];else g=c.indexOf(a),-1!==g?c.splice(g,1):e.iter(a,k);return this};a.delegate=function(a){-1===c.indexOf(a)&&c.push(a)};a.fire=function(a){var d=b[a],g=[];if(d&&0!==d.length)for(var l=e.toArray(arguments,1),h=0;h!==d.length;++h){var p=d[h].apply(this,l);"object"===
typeof p&&g.push(p)}for(d=0;d!==c.length;++d)l=c[d],-1===g.indexOf(l)&&l.fire.apply(l,arguments);return this};return a};e.sequenceFactory=function(){var a=[];return function(b,c){if(1===a.push(b.bind(null,function(){c.apply(this,arguments);a.shift();var b=a[0];b&&b()})))a[0]()}};e.getViewRect=function(){var a=l.documentElement||l,b=l.body;e.getViewRect=function(c){c=c||[0,0,0,0];c[0]=Math.round((d.pageXOffset||a.scrollLeft||b.scrollLeft)-(a.clientLeft||b.clientLeft||0));c[1]=Math.round((d.pageYOffset||
a.scrollTop||b.scrollTop)-(a.clientTop||b.clientTop||0));c[2]=Math.min(b.clientWidth,d.innerWidth)|0;c[3]=Math.min(b.clientHeight,d.innerHeight)|0;return c};return e.getViewRect.apply(this,arguments)};e.location=function(){var a={left:0,top:0};return function(b,c){c=c||a;var d=b.getBoundingClientRect();c.left=Math.round(d.left);c.top=Math.round(d.top);if(d=b.offsetParent)d=d.getBoundingClientRect(),c.left-=d.left,c.top-=d.top;return c}}();e.getURLParameter=function(a){return decodeURIComponent((RegExp("[?&]"+
a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null};e.genGUID="".replace.bind("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)});e.deviceID=function(a){var b;try{b=e.sessionStorage.getItem(a)||d.localStorage.getItem(a),b||(b=e.genGUID(),d.localStorage.setItem(a,b))}catch(c){b=b||e.genGUID(),e.sessionStorage.setItem(a,b)}return b};e.sessionStorage=function(){var a=Object.create(null);return{setItem:function(b,
c){try{d.sessionStorage.setItem(b,c)}catch(e){a[b]=c}},getItem:function(b){try{return a[b]||d.sessionStorage.getItem(b)}catch(c){return null}},removeItem:function(b){try{delete a[b],d.sessionStorage.removeItem(b)}catch(c){}}}}();e.transformName=function(){var a=l.createElement("div"),b="webkitTransform";["transform","MozTransform","msTransform"].some(function(a){return a in this?(b=a,!0):!1},a.style);return function(){return b}}();e.position=function(){var a=e.transformName();return"msTransform"!==
a?function(b,c,d,e,g){b=b.style;b[a]="translate3d("+c+"px,"+d+"px,0)";void 0!==e&&(b.width=e+"px",b.height=g+"px")}:function(b,c,d,e,g){b=b.style;b[a]="translate("+c+"px,"+d+"px)";void 0!==e&&(b.width=e+"px",b.height=g+"px")}}()})(ic2s||(ic2s={}),window,window.document);(function(g,d,l,e){var a="ic2s.txt",b=10485760,c=g.log||(g.log={}),f=g.utils,n=f.timeLabel;c.active=!1;c.toFile=f.noop;if(d.console){c.console=function(a){var b=f.toArray(arguments,1);a.apply?a.apply(d.console,b):a(b.join(" "));c.toFile.apply(this,b)};try{c.CL=c.console.bind(this,d.console.log),c.CI=c.console.bind(this,d.console.info),c.CE=c.console.bind(this,d.console.error)}catch(k){c.CL=c.CI=c.CE=f.noop}}else c.console=c.CL=c.CI=c.CE=f.noop;c.start=function(g){function l(e){e&&c.CI("File system quota:",
e);window.reqFileSystem(window.PERSISTENT,b,function(b){function e(){b.root.getFile(g,{create:!0},function(a){a.createWriter(function(b){var v=window.buildBlob;b.onwriteend=p=function(){0<h.length&&b.readyState!==b.WRITING&&(b.write(v(h,"text/plain")),h="")};b.onerror=function(a){k((a.target||a.srcElement).error)};c.active=!0;"toURL"in a&&d.alert(a.toURL());1<h.length&&p()},k)},k)}g=g||a;b.root.getFile(g,{create:!1},function(a){a.remove(e,e)},e)},k)}function k(a){switch(a.code){case a.QUOTA_EXCEEDED_ERR:a=
"QUOTA_EXCEEDED_ERR";break;case a.NOT_FOUND_ERR:a="NOT_FOUND_ERR";break;case a.SECURITY_ERR:a="SECURITY_ERR";break;case a.INVALID_MODIFICATION_ERR:a="INVALID_MODIFICATION_ERR";break;case a.INVALID_STATE_ERR:a="INVALID_STATE_ERR";break;default:a="Unknown Error"}c.CE("File System Error: ",a);c.active=!1;c.toFile=f.noop;h=""}if(window.reqFileSystem!==e){var h=function(){var a=n()+": Location: "+location+"\n",b=navigator,c="";if(b){var c=n()+": "+b+"\n",d;for(d in b)if(b.hasOwnProperty(d)){var y=b[d],
v=typeof y;if("string"===v||"number"===v)c+=d+": "+y+"\n"}}return a+c}(),p=c.toFile;c.toFile=function(){h+=n()+": "+f.toArray(arguments).join(" ")+"\n";p.apply(window,arguments)};try{f.Prop.get(window,"storageInfo").requestQuota(window.PERSISTENT,b,l,k)}catch(u){l()}}}})(ic2s||(ic2s={}),window,window.document);(function(g,d,l){function e(a){++n;setTimeout(function(){--n},arguments.length?a:1E4)}var a=g.communication||(g.communication={}),b=g.utils,c=g.log.CI,f=g.log.CE;c("communication module");var n=0;a.socket=function(a,m){if(n)return c("Blocked"),null;e();m=m||Object.create(null);var t;if("origin"in m)t=m.origin;else if(g.origin){t=g.origin;var r=io.util.parseUri(t);r.port||(r=r.protocol||d.location.protocol,t+=":"+("http:"===r||"http"===r?80:443))}t=t||location.origin||location.protocol+"//"+location.host;
var h=b.eventSource(),p=null,u;h.origin=function(){return t};h.stop=function(){p&&(u=!0,p.emit("bye"),e());return h};h.send=function(){var a=b.toArrayFactory(),c=function(){if(d.Worker)try{var a=new Worker(t+"/lib/worker.min.js"),c=[];a.onmessage=function(a){a=a.data;var b=c.shift();b[1](a&&a!==b[0]?d.btoa(a):b[0])};return function(d){c.push(b.toArray(arguments));a.postMessage(256<d.length?d:null)}}catch(y){}return function(a,b){b(256>a.length?a:d.btoa(RawDeflate.deflate(a)))}}();return function(){if(p){var b=
JSON.stringify(a(arguments));c(b,function(a){p&&p.send(a)})}return h}}();setTimeout(function(){if(p)return c("Socket already connected"),h;var n=b.deviceID(m.key||"iClick2ShareId"),r=0,w=g.utils.getURLParameter("ic2s\\+id");w&&(n+=":"+w);w={"force new connection":!0};m.transport&&(w.transports=[m.transport]);var B=t+"/"+a;c("connecting",B);io.connect(B,w).on("connect",function(){c("connected")}).on("connect_failed",function(){f("connected failed");h.fire("error","failed")}).on("reconnect_failed",
function(){f("reconnected failed");h.fire("error","failed")}).on("error",function(){f("error")}).on("disconnect",function(){r&&(clearInterval(r),r=0);u?p&&(p=null,this.disconnect(),h.fire("stop")):this.socket.reconnect()}).on("bye",function(a){u=!0;r&&(clearInterval(r),r=0);this.disconnect();e();a&&h.fire(a)}).on("hello",function(a){c("hello",a);h.fire("config",a.config);var b={version:0.17,id:n,title:l.title,domain:g.utils.getURLParameter("ic2s\\+domain")||d.location.hostname,url:d.location.href,
userAgent:d.navigator.userAgent},z=0;this.on("keep-alive",function(){z=0}).on("attached",function(a){c("Attached",a.id,!!p);p?h.fire("reset"):(u=!1,p=this.on("message",function(){function a(d){"cursor"!==d.substring(2,8)&&c("<<< "+Date.now()+" "+d.length+" "+d.substring(0,128));try{d=JSON.parse(d)}catch(q){d=JSON.parse(b(d))}h.fire.apply(h,d)}var b=function(){var a=/[\x00-\x1F]/g,b=/'["\\]'/g;return function(c){return c.replace(a," ").replace(b,"' '")}}();return function(b){if(p)try{if(91===b.charCodeAt(0))a(b);
else{var c=RawDeflate.inflate(atob(b));c&&a(c)}}catch(d){}}}()));h.fire("start",a,this.socket.transport.name)}).emit("hello",b);r=function(b){return setInterval(function(){3<++z?b.disconnect():b.emit("keep-alive")},1E3*(a.config.keepAliveInterval||4))}(this)});return h.fire("starting")},0);return h}})(ic2s||(ic2s={}),window,window.document);(function(g,d,l,e){function a(a,c,d){t(a,function(a,d,e){if(u.test(a))return!0;if(null!==a.getAttribute("data-ic2s-ignore"))return u.add(a),!0;a.removeAttribute("style");switch(a.tagName){case "IMG":var v=a.src;return v&&("blob:"===v.substring(0,5)||g.config.encodeImages)?(p(a,function(a,b){b.setAttribute("src",a||v);d()}),!1):!0;case "IFRAME":return a.setAttribute("src",a.src),!0;case "A":a.setAttribute("target","_blank");default:return a.href&&a.setAttribute("href",/^javascript[:]/.test(a.href)?
"javascript:void(0)":a.href),a.src&&a.setAttribute("src",/^javascript[:]/.test(a.src)?"javascript:void(0)":a.src),b(a,c[e]),!0}},d)}function b(a,b){"checked"in b&&(b.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"));if("value"in b){var c=b.value;if("TEXTAREA"===a.tagName){a.innerHTML=c;return}a.setAttribute("data-ic2s-value","password"!==b.type?c:c.replace(/./g,"*"))}"selectedIndex"in b&&a.setAttribute("data-ic2s-selected",b.selectedIndex)}function c(a,b,c){function d(){var q=
b.getElementsByTagName("*"),e=0;t(a.getElementsByTagName("*"),function(a,b){return A(a,q[e++],b)},function(b){c(a,b,q)})}A(a,b,d)&&d()}function f(b,d){c(C(b),b,function(b,c,q){a(c,q,function(){u.clear();d(b)})})}g.config=g.config||{};var n=g.monitor||(g.monitor={}),k=g.log.CI,m=g.utils,t=m.asyncIter,r=m.delta,h=m.requestAnimationFrame;k("monitor module");var p=function(){var a=l.createElement("canvas"),b=a.getContext&&a.getContext("2d");if(!b)return function(a,b){b.call(a)};var c={},d=/^data[:]/;
return function(e,g){function x(){a.width=this.width;a.height=this.height;b.drawImage(this,0,0);var d;try{d=a.toDataURL(),D&&(d='"'+d+'"'),c[this.src]=d}catch(e){a=l.createElement("canvas"),b=a.getContext("2d")}E(this,d)}function s(){E(this)}function E(a,b){this.removeEventListener("load",x,!1);this.removeEventListener("abort",s,!1);this.removeEventListener("error",s,!1);g(b,a)}if(e){var f="string"===typeof e?e:e.src;if(d.test(f))g.call(e,f);else{var F=c[f];if(F)g.call(e,F);else{var D=!1;"string"===
typeof e&&(e=l.createElement("img"),D=34===f.charCodeAt(0),e.src=D?f.substring(1,f.length-1):f);0<e.width||0<e.height||e.complete?x.call(e):(e.addEventListener("load",x,!1),e.addEventListener("abort",s,!1),e.addEventListener("error",s,!1))}}}else g()}}(),u=function(){var a=[],b=/\Wbackground[^;]+;/g;return{add:function(b){a.push(b)},test:function(b){do{if(-1!==a.indexOf(b))return!0;b=b.parentElement}while(b);return!1},clear:function(){for(var c;c=a.pop();){var d=c.parentElement;if(d)if(""===c.getAttribute("data-ic2s-ignore")){var e=
l.createElement("div"),g=c.getAttribute("data-ic2s-style")||"";e.setAttribute("data-ic2s-style",g.replace(b,"")+"background-color:blue");d.replaceChild(e,c)}else d.removeChild(c)}}}}(),A=function(){var a=function(){function a(b){if(b){b=b.split(";");for(var c=0;c<b.length;++c){var d=b[c],e=d.indexOf(":");0<e&&(this[d.substring(0,e).trim()]=d.substring(e+1).trim())}}}var b=function(){var a=/^"?blob:/;return function(b,c,d){var e=b.getPropertyValue(c);if("string"===typeof e&&"url("===e.substring(0,
4)&&(b=e.slice(4,-1),g.config.encodeImages||a.test(b))){p(b,function(a){d.call(this,c,a?"url("+a+")":e)});return}d.call(this,c,e)}}();a.prototype={fixURL:function(a,c,d){b.call(this,a,c,function(a,b){b&&(this[a]=b);d()})},toString:function(){var a="",b;for(b in this)this.hasOwnProperty(b)&&void 0!==this[b]&&(a+=b+":"+this[b]+";");return a},getPropertyValue:function(a){return this[a]},removeProperty:function(a){delete this[a]}};return a}(),b=function(){function a(b,c){var d=parseInt(b,10);return isNaN(d)?
b:d+c+"px"}var b=!1,c=!1,e=!1;return{need:function(a){b=-1!==a.position.indexOf("fixed");c="auto"===a.left&&"auto"!==a.right||"auto"===a.top&&"auto"!==a.bottom;e=-1!==a.display.search(/block|flex|grid/)&&"auto"!==a.width;return b||c||e},fix:function(g,q){if(c){q.position="absolute";var f=m.location(g);q.left=f.left+"px";q.right="auto";q.top=f.top+"px";q.bottom="auto"}b&&(q.position="absolute",q.left=a(q.left,d.scrollX),q.top=a(q.top,d.scrollY));e&&(f=parseFloat(q.width),q.width=Math.floor(1.012*f)+
"px")}}}(),c=/image$/,e=/; ?cursor:[^;]+/,q=/(-appearance)|(^(-|animation))/,f=/; ?(-|transition)[^;]+/g,x=/;[^:]+: ?(auto|normal);/g,s=""!==d.getComputedStyle(l.head).cssText?function(d,q,s,h,l){var k=h.cssText.replace(f,"").replace(x,";"),m=!g.config.encodeImages&&-1===k.indexOf("blob:");"A"===s&&(k=k.replace(e,""));if(!b.need(h)&&m)return d.setAttribute("data-ic2s-style",k),!0;var n=new a(k);b.fix(q,n);if(m)return d.setAttribute("data-ic2s-style",n.toString()),!0;t(h,function(a,b,d,e){if(!c.test(a))return!0;
n.fixURL(e,a,b);return!1},function(){d.setAttribute("data-ic2s-style",n.toString());return l.apply(this,arguments)});return!1}:function(c,d,e,g,f){var s=new a;t(g,function(a,b,c,d){if("cursor"===a&&"A"===e||q.test(a))return!0;if("position"===a)return a=d.position,s.position="fixed"===a||"sticky"===a?"absolute":a,!0;s.fixURL(d,a,b);return!1},function(){b.need(g)&&b.fix(d,s);c.setAttribute("data-ic2s-style",s.toString());return f.apply(this,arguments)});return!1};return function(a,b,c){var e=a.tagName;
if("OPTION"===e||"PARAM"===e||u.test(a))return!0;var q=d.getComputedStyle(b);if("none"===q.display)return u.add(a),!0;var g=b.getBoundingClientRect();return 0===g.width&&0===g.height?(a.setAttribute("data-ic2s-style","width:0; height:0; overflow:hidden"),!0):s(a,b,e,q,c)}}(),C=function(){var a="querySelectorAll"in l?function(a){return 0===a.querySelectorAll("script,iframe").length}:function(a){return 0===a.getElementsByTagName("SCRIPT").length&&0===a.getElementsByTagName("IFRAME").length};return function v(b){if(!b)return null;
var c=b.tagName;if("IFRAME"===c||"SCRIPT"===c)return l.createElement("span");if(a(b))return b.cloneNode(!0);c=b.cloneNode(!1);b=b.children;for(var d=b.length,e=0;e!==d;++e){var g=v(b[e]);g&&c.appendChild(g)}return c}}(),w=function(){var a=/\.\d+px/g,b=/data-ic2s-/g,c=/-webkit-cross-fade\(([^,]+)[^;]+/g,d=/\son\w+=(("[^"]+")|([^> \f\n\r\t\v]+))/gi;return function(e){return e.replace(a,"px").replace(b,"").replace(c,"$1").replace(d,"")}}();n.Style=function(a){function b(){for(var c="",d=l.styleSheets,
e=0;e!==d.length;++e){var g=d[e],f="";try{if(g.disabled)continue;f=g.media.mediaText;if(!window.matchMedia(f).matches)continue;var s=g.cssRules||g.rules;if(s){for(var h="",k=0;k!==s.length;++k){var m=s[k],n=m.selectorText;n&&-1!==n.indexOf(":")&&(h+=m.cssText+"\n")}h&&(c+="<style>\n"+h+"</style>\n");continue}}catch(y){}c+='<link rel="stylesheet" href="'+g.href+'" type="'+(g.type||"text/css")+'"'+(f?' media="'+f+'"':"")+">\n"}c&&a(c)}d.matchMedia||(d.matchMedia=function(){var a={matches:!0};return function(){return a}}());
b();return{reset:b,stop:m.noop}};n.DOM=function(){function a(){c=2}function b(a,d){var e=r();return{notifier:f.bind(null,a,function(a){function b(){var g=w(a.outerHTML);(g=e(g))?(d(g),c=1):++c}h?h(b):setTimeout(b,0)}),reset:function(){e=r()}}}var c=0;return function(e,f){k("DOM ctor");f=f||l.body;var m=b(f,e),x=m.notifier,s=Math.round(60/(g.config.updatesPerSecond||6)),n=c,p=h?function(){var a=function(){if(null===p)return 0;c=c<s?++c:s;++n>=c&&(n=0,x());return h(a)};return a()}():d.setInterval(x,
Math.round(1E3/(g.config.updatesPerSecond||6)));f.addEventListener("click",a,!0);var r;d.MutationObserver&&(r=new MutationObserver(a),r.observe(f===d?l.body:f,{attributes:!0,childList:!0,characterData:!0}));return{reset:m.reset,stop:function(){k("DOM stop");null!==p&&(h||d.clearInterval(p),p=null);f.removeEventListener("click",a,!0);r&&r.disconnect()}}}}();n.Geometry=function(a,b){function c(){0<=f[0]&&(a.apply(null,f),f[0]=-1)}function e(){h();c()}k("Geometry ctor");b=b||d;var f=[-1,-1,-1,-1],h=
b===d?m.getViewRect.bind(null,f):function(){m.getViewRect(f);var a=b.getBoundingClientRect();f[0]=Math.max(-a.left,0);f[1]=Math.max(-a.top,0);f[2]=Math.min(a.right,f[2])-Math.max(a.left,0);f[3]=Math.min(a.bottom,f[3])-Math.max(a.top,0)},l=setInterval(c,1E3/(g.config.updatesPerSecond||6));b.addEventListener("scroll",h,!1);b.addEventListener("resize",h,!1);e();return{reset:e,stop:function(){k("Geometry stop");clearInterval(l);b.removeEventListener("scroll",h,!1);b.removeEventListener("resize",h,!1)}}};
n.Focus=function(a,b){function c(){e(l.activeElement)}k("Focus ctor");b=b||l.body;var e=function(){var a;return function(b){b=b||d.event;b=b.target||b.srcElement||b;b!==a&&(a&&a.removeAttribute("data-ic2s-focus"),b.setAttribute("data-ic2s-focus","1"),a=b)}}();b.addEventListener("focusin",e,!1);b.addEventListener("focus",e,!0);c();return{reset:c,stop:function(){k("Focus stop");b.removeEventListener("focusin",e,!1);b.removeEventListener("focus",e,!0)}}};n.Visibility=function(){var a=m.Prop.getName(l,
"hidden");if(!a)return null;var b=a.replace(/hidden/i,"visibilitychange");return function(c){function d(){var b=l[a];b!==f&&(f=b,c(!b))}k("Visibility ctor");var f;d();l.addEventListener(b,d,!1);return{reset:function(){f=e;d()},stop:function(){k("Visibility stop");l.removeEventListener(b,d,!1)}}}}();n.Cursor=function(a){function b(a){a=a||d.event;f=a.pageX;h=a.pageY}function c(){f!==e&&(a(f,h),m=f,f=e)}k("Cursor ctor");var f,h,m,n=d.setInterval(c,Math.round(300/(g.config.updatesPerSecond||6)));l.addEventListener("mousemove",
b,!1);l.addEventListener("click",b,!1);return{reset:function(){f=m;c()},stop:function(){k("Cursor stop");l.removeEventListener("mousemove",b,!1);l.removeEventListener("click",b,!1);d.clearInterval(n)}}}})(ic2s||(ic2s={}),window,window.document);setTimeout(function(){function g(a){return a.replace(/-(moz|ms)-/g,"-webkit-")}function d(d){a.schedule(function(){var e=r(d);if("<body"!==e.substring(0,5))z||(z=!0,u.send("reset")),r=a.merge();else if(z=!1,!c.is(":checked")){var f=n.pageXOffset,l=n.pageYOffset;k.body.outerHTML=g(G(e));for(e=k.getElementsByTagName("head");1<e.length;)e[e.length-1].remove();k.body.addEventListener("click",function(a){a.preventDefault()},!0);var p=$(k.body);p.find("[selected]").each(function(){this.selectedIndex=parseInt(this.getAttribute("selected"),
10)});h&&p.find("button").each(function(){var a=$(this),b=a.outerWidth(),c=a.outerHeight();a.width(b).height(c)});m=$('<div id="ic2s-boundary"></div>').appendTo(p)[0];a.position(m,A,C,w,B);t=$('<div id="ic2s-cursor"></div>').appendTo(p)[0];a.position(t,y,v);n.scrollTo(f,l);(function(){if(b.is(":checked")){var a=p.find("[focus]:first")[0];if(a){var c=a.outerHTML;q!==c&&(q=c,a.scrollIntoView(),n.scrollBy(-20,-20))}else q=""}})()}})}function l(a){document.body.className=a?"hidden":"connected"}var e=
(ic2s.config||{}).updatesPerSecond||6,a=ic2s.utils,b=$("#follow"),c=$("#freeze"),f=$("#ic2s")[0],n=f.contentWindow,k=f.contentDocument||n.document,m=$(k.body).find("#ic2s-boundary"),t=$(k.body).find("#ic2s-cursor"),r,h=!1,p=function(){var a=["Chrome","Firefox","Opera","Safari","IE"],b=$(".icon").click(function(){alert(this.title)});return function(c){var d=new UAParser(c);c=d.getBrowser();var e=Math.abs(a.indexOf(c.name)),f=-7-71*e,d=d.getOS();b.css({"background-image":"url(/resources/browser_logos-64.png)",
"background-position":f+"px -2px"}).attr("title",c.name+" version "+c.major+" on "+d.name+" "+d.version);h=1===e||4===e}}();$(n).mousemove(function(){var a=-1,b=-1;setInterval(function(){u&&0<a&&(u.send("cursor",a,b),a=-1)},Math.round(500/e));return function(c){c=c||n.event;a=c.pageX;b=c.pageY}}());var u=null,A=0,C=0,w,B,y=0,v=0;ic2s.communication.socket("support").on({start:function(b){u=this;r=a.merge();$(".address > input[type=text]").val(b.title+": "+b.url);p(b.userAgent);l(!1);$("#disconnect").off("click").on("click",
function(){u.stop()}).removeAttr("disabled")},stop:function(){u=null;window.location.reload()},geometry:function(c,d,e,f){b.is(":checked")&&n.scrollTo(c,d);a.position(m,c,d);m.style.width=e+"px";m.style.height=f+"px";A=c;C=d;w=e+4;B=f+4},visibility:l,cursor:function(b,c){a.position(t,b,c);y=b;v=c},Style:function(a){k.head.innerHTML=g(a)+'\n<link rel="stylesheet" type="text/css" href="/resources/frame.css">'},DOM:d});c.on("change",function(){d(["",0,0])});var z=!1,q="",G=function(){var a=/<script/i,
b=/<[^>]+\son\w+\s*=/i;return function(c){return-1!==c.search(a)||-1!==c.search(b)?(u.stop(),alert("Bad HTML"),""):c}}()},1E3);
