var ic2s;
(function(f,e,k){var d=f.utils||(f.utils={});d.noop=function(){};d.retArg=function(a){return a};d.toArray=function(){var a=Array.prototype.slice;return function(b,c,h){c=c||0;if(!h)return a.call(b,c);var d=0,e=b.length;for(h.length=e-c;c<e;)h[d++]=b[c++];return h}}();d.toArrayFactory=function(a){var b=d.toArray;a=a||[];return function(c,h){return b(c,h,a)}};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=d.toArray(arguments,1);return function(){return b.apply(a,c.concat(d.toArray(arguments)))}});
d.iter=function(a,b){var c;if("hasOwnProperty"in a)for(c in a)a.hasOwnProperty(c)&&b.call(a,c,a[c],a);else for(c in a)b.call(a,c,a[c],a)};d.timeLabel=function(){var a=new Date,b=a.toString();return b.substring(0,b.indexOf("GMT")-1)+":"+("00"+a.getMilliseconds()).slice(-3)};d.Prop=function(){var a=function(){for(var b=["WebKit","Moz","MS","O"],c=b.length,a=0;a<c;++a)b.push(b[a].toLowerCase());return b}();return{getName:function(){var b={};return function(c,h){if(!c)return null;if(h in b)return b[h];
if(h in c)return b[h]=h;for(var e=h.charAt(0).toUpperCase()+h.slice(1),d=0;d<a.length;++d){var n=a[d]+e;if(n in c)return b[h]=n}return null}}(),get:function(b,c,a){return(c=this.getName(b,c))?b[c]:a},set:function(b,c,a){c=this.getName(b,c);b[c]=a}}}();d.requestAnimationFrame=function(){var a=d.Prop.get(e,"requestAnimationFrame");return a&&a.bind(e)}();d.schedule=function(a){d.requestAnimationFrame?d.requestAnimationFrame(a):a()};d.getPrefix=function(){var a;return function(){if(!a)for(var b=e.getComputedStyle(k.body),
c=0;c<b.length;++c)if(45===b[c].charCodeAt(0)){var h=b[c].match(/-([^-]+)-/);h&&(a=h[1])}return a}}();String.prototype.delta=function(a){if(this==a)return null;if(0===this.length)return[a];for(var b=0;b<this.length&&b<a.length&&this.charCodeAt(b)===a.charCodeAt(b);++b);for(var c=this.length-1,h=a.length-1;c>b&&h>b&&this.charCodeAt(c)===a.charCodeAt(h);--c,--h);return[a.substring(b,h+1),b,c+1]};Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});d.clone=function(a,b){b=b||
Object.create(null);d.iter(a,function(c,a){b[c]=a});return b};d.delta=function(a){a=a||"";return function(b){var c=a.delta(b);a=b;return c}};d.merge=function(a){a=a||"";return function(b){return a=1===b.length?b[0]:a.substring(0,b[1])+b[0]+a.substring(b[2])}};d.asyncIter=function(a,b,c){function d(){0===--f&&c.call(e,a)}for(var e=this,f=1,n=0;n<a.length;){++f;var q=a[n];b(a[n],d,n,a)&&--f;q===a[n]&&++n}d()};d.eventSource=function(a){var b=Object.create(null),c=[];a=a||Object.create(null);a.on=function l(c,
a){if("string"===typeof c){var e=b[c]||(b[c]=[]);a&&-1===e.indexOf(a)&&e.push(a)}else d.iter(c,l);return this};a.off=function p(a,e){var f;if("string"===typeof a)if(e){var g=b[a];g&&(f=g.indexOf(e),-1!==f&&g.splice(f,1))}else delete b[a];else f=c.indexOf(a),-1!==f?c.splice(f,1):d.iter(a,p);return this};a.delegate=function(a){-1===c.indexOf(a)&&c.push(a)};a.fire=function(a){var e=b[a],f=[];if(e&&0!==e.length)for(var k=d.toArray(arguments,1),g=0;g!==e.length;++g){var m=e[g].apply(this,k);"object"===
typeof m&&f.push(m)}for(e=0;e!==c.length;++e)k=c[e],-1===f.indexOf(k)&&k.fire.apply(k,arguments);return this};return a};d.sequenceFactory=function(){var a=[];return function(b,c){if(1===a.push(b.bind(null,function(){c.apply(this,arguments);a.shift();var b=a[0];b&&b()})))a[0]()}};d.getViewRect=function(){var a=k.documentElement||k,b=k.body;d.getViewRect=function(c){c=c||[0,0,0,0];c[0]=Math.round((e.pageXOffset||a.scrollLeft||b.scrollLeft)-(a.clientLeft||b.clientLeft||0));c[1]=Math.round((e.pageYOffset||
a.scrollTop||b.scrollTop)-(a.clientTop||b.clientTop||0));c[2]=Math.min(b.clientWidth,e.innerWidth)|0;c[3]=Math.min(b.clientHeight,e.innerHeight)|0;return c};return d.getViewRect.apply(this,arguments)};d.location=function(){var a={left:0,top:0};return function(b,c){c=c||a;var e=b.getBoundingClientRect();c.left=Math.round(e.left);c.top=Math.round(e.top);if(e=b.offsetParent)e=e.getBoundingClientRect(),c.left-=e.left,c.top-=e.top;return c}}();d.getURLParameter=function(a){return decodeURIComponent((RegExp("[?&]"+
a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null};d.genGUID="".replace.bind("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)});d.deviceID=function(a){var b;try{b=d.sessionStorage.getItem(a)||e.localStorage.getItem(a),b||(b=d.genGUID(),e.localStorage.setItem(a,b))}catch(c){b=b||d.genGUID(),d.sessionStorage.setItem(a,b)}return b};d.sessionStorage=function(){var a=Object.create(null);return{setItem:function(b,
c){try{e.sessionStorage.setItem(b,c)}catch(d){a[b]=c}},getItem:function(b){try{return a[b]||e.sessionStorage.getItem(b)}catch(c){return null}},removeItem:function(b){try{delete a[b],e.sessionStorage.removeItem(b)}catch(c){}}}}();d.transformName=function(){var a=k.createElement("div"),b="webkitTransform";["transform","MozTransform","msTransform"].some(function(a){return a in this?(b=a,!0):!1},a.style);return function(){return b}}();d.position=function(){var a=d.transformName();return"msTransform"!==
a?function(b,c,e,d,f){b=b.style;b[a]="translate3d("+c+"px,"+e+"px,0)";void 0!==d&&(b.width=d+"px",b.height=f+"px")}:function(b,c,e,d,f){b=b.style;b[a]="translate("+c+"px,"+e+"px)";void 0!==d&&(b.width=d+"px",b.height=f+"px")}}()})(ic2s||(ic2s={}),window,window.document);(function(f,e,k,d){var a="ic2s.txt",b=10485760,c=f.log||(f.log={}),h=f.utils,l=h.timeLabel;c.active=!1;c.toFile=h.noop;if(e.console){c.console=function(a){var b=h.toArray(arguments,1);a.apply?a.apply(e.console,b):a(b.join(" "));c.toFile.apply(this,b)};try{c.CL=c.console.bind(this,e.console.log),c.CI=c.console.bind(this,e.console.info),c.CE=c.console.bind(this,e.console.error)}catch(p){c.CL=c.CI=c.CE=h.noop}}else c.console=c.CL=c.CI=c.CE=h.noop;c.start=function(f){function k(d){d&&c.CI("File system quota:",
d);window.reqFileSystem(window.PERSISTENT,b,function(b){function d(){b.root.getFile(f,{create:!0},function(a){a.createWriter(function(b){var w=window.buildBlob;b.onwriteend=m=function(){0<g.length&&b.readyState!==b.WRITING&&(b.write(w(g,"text/plain")),g="")};b.onerror=function(a){p((a.target||a.srcElement).error)};c.active=!0;"toURL"in a&&e.alert(a.toURL());1<g.length&&m()},p)},p)}f=f||a;b.root.getFile(f,{create:!1},function(a){a.remove(d,d)},d)},p)}function p(a){switch(a.code){case a.QUOTA_EXCEEDED_ERR:a=
"QUOTA_EXCEEDED_ERR";break;case a.NOT_FOUND_ERR:a="NOT_FOUND_ERR";break;case a.SECURITY_ERR:a="SECURITY_ERR";break;case a.INVALID_MODIFICATION_ERR:a="INVALID_MODIFICATION_ERR";break;case a.INVALID_STATE_ERR:a="INVALID_STATE_ERR";break;default:a="Unknown Error"}c.CE("File System Error: ",a);c.active=!1;c.toFile=h.noop;g=""}if(window.reqFileSystem!==d){var g=function(){var a=l()+": Location: "+location+"\n",b=navigator,c="";if(b){var c=l()+": "+b+"\n",s;for(s in b)if(b.hasOwnProperty(s)){var e=b[s],
w=typeof e;if("string"===w||"number"===w)c+=s+": "+e+"\n"}}return a+c}(),m=c.toFile;c.toFile=function(){g+=l()+": "+h.toArray(arguments).join(" ")+"\n";m.apply(window,arguments)};try{h.Prop.get(window,"storageInfo").requestQuota(window.PERSISTENT,b,k,p)}catch(r){k()}}}})(ic2s||(ic2s={}),window,window.document);(function(f,e,k){function d(a){++l;setTimeout(function(){--l},arguments.length?a:1E4)}var a=f.communication||(f.communication={}),b=f.utils,c=f.log.CI,h=f.log.CE;c("communication module");var l=0;a.socket=function(a,n){if(l)return c("Blocked"),null;d();n=n||Object.create(null);var q;if("origin"in n)q=n.origin;else if(f.origin){q=f.origin;var v=io.util.parseUri(q);v.port||(v=v.protocol||e.location.protocol,q+=":"+("http:"===v||"http"===v?80:443))}q=q||location.origin||location.protocol+"//"+location.host;
var g=b.eventSource(),m=null,r;g.origin=function(){return q};g.stop=function(){m&&(r=!0,m.emit("bye"),d());return g};g.send=function(){var a=b.toArrayFactory(),c=function(){if(e.Worker)try{var a=new Worker(q+"/lib/worker.min.js"),c=[];a.onmessage=function(a){a=a.data;var b=c.shift();b[1](a&&a!==b[0]?e.btoa(a):b[0])};return function(e){c.push(b.toArray(arguments));a.postMessage(256<e.length?e:null)}}catch(A){}return function(a,b){b(256>a.length?a:e.btoa(RawDeflate.deflate(a)))}}();return function(){if(m){var b=
JSON.stringify(a(arguments));c(b,function(a){m&&m.send(a)})}return g}}();setTimeout(function(){if(m)return c("Socket already connected"),g;var u=b.deviceID(n.key||"iClick2ShareId"),l=0,t=f.utils.getURLParameter("ic2s\\+id");t&&(u+=":"+t);t={"force new connection":!0};n.transport&&(t.transports=[n.transport]);var s=q+"/"+a;c("connecting",s);io.connect(s,t).on("connect",function(){c("connected")}).on("connect_failed",function(){h("connected failed");g.fire("error","failed")}).on("reconnect_failed",
function(){h("reconnected failed");g.fire("error","failed")}).on("error",function(){h("error")}).on("disconnect",function(){l&&(clearInterval(l),l=0);r?m&&(m=null,this.disconnect(),g.fire("stop")):this.socket.reconnect()}).on("bye",function(a){r=!0;l&&(clearInterval(l),l=0);this.disconnect();d();a&&g.fire(a)}).on("hello",function(a){c("hello",a);g.fire("config",a.config);var b={version:0.17,id:u,title:k.title,domain:f.utils.getURLParameter("ic2s\\+domain")||e.location.hostname,url:e.location.href,
userAgent:e.navigator.userAgent},s=0;this.on("keep-alive",function(){s=0}).on("attached",function(a){c("Attached",a.id,!!m);m?g.fire("reset"):(r=!1,m=this.on("message",function(){function a(e){"cursor"!==e.substring(2,8)&&c("<<< "+Date.now()+" "+e.length+" "+e.substring(0,128));try{e=JSON.parse(e)}catch(s){e=JSON.parse(b(e))}g.fire.apply(g,e)}var b=function(){var a=/[\x00-\x1F]/g,b=/'["\\]'/g;return function(c){return c.replace(a," ").replace(b,"' '")}}();return function(b){if(m)try{if(91===b.charCodeAt(0))a(b);
else{var c=RawDeflate.inflate(atob(b));c&&a(c)}}catch(e){}}}()));g.fire("start",a,this.socket.transport.name)}).emit("hello",b);l=function(b){return setInterval(function(){3<++s?b.disconnect():b.emit("keep-alive")},1E3*(a.config.keepAliveInterval||4))}(this)});return g.fire("starting")},0);return g}})(ic2s||(ic2s={}),window,window.document);(function(f,e,k,d){function a(a,c,e){q(a,function(a,e,s){if(r.test(a))return!0;if(null!==a.getAttribute("data-ic2s-ignore"))return r.add(a),!0;a.removeAttribute("style");switch(a.tagName){case "IMG":var d=a.src;return d&&("blob:"===d.substring(0,5)||f.config.encodeImages)?(m(a,function(a,b){b.setAttribute("src",a||d);e()}),!1):!0;case "IFRAME":return a.setAttribute("src",a.src),!0;case "A":a.setAttribute("target","_blank");default:return a.href&&a.setAttribute("href",/^javascript[:]/.test(a.href)?
"javascript:void(0)":a.href),a.src&&a.setAttribute("src",/^javascript[:]/.test(a.src)?"javascript:void(0)":a.src),b(a,c[s]),!0}},e)}function b(a,b){"checked"in b&&(b.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"));if("value"in b){var c=b.value;if("TEXTAREA"===a.tagName){a.innerHTML=c;return}a.setAttribute("data-ic2s-value","password"!==b.type?c:c.replace(/./g,"*"))}"selectedIndex"in b&&a.setAttribute("data-ic2s-selected",b.selectedIndex)}function c(a,b,c){function e(){var d=
b.getElementsByTagName("*"),f=0;q(a.getElementsByTagName("*"),function(a,b){return u(a,d[f++],b)},function(b){c(a,b,d)})}u(a,b,e)&&e()}function h(b,e){c(z(b),b,function(b,c,d){a(c,d,function(){r.clear();e(b)})})}f.config=f.config||{};var l=f.monitor||(f.monitor={}),p=f.log.CI,n=f.utils,q=n.asyncIter,v=n.delta,g=n.requestAnimationFrame;p("monitor module");var m=function(){var a=k.createElement("canvas"),b=a.getContext&&a.getContext("2d");if(!b)return function(a,b){b.call(a)};var c={},e=/^data[:]/;
return function(d,f){function g(){a.width=this.width;a.height=this.height;b.drawImage(this,0,0);var e;try{e=a.toDataURL(),x&&(e='"'+e+'"'),c[this.src]=e}catch(d){a=k.createElement("canvas"),b=a.getContext("2d")}n(this,e)}function h(){n(this)}function n(a,b){this.removeEventListener("load",g,!1);this.removeEventListener("abort",h,!1);this.removeEventListener("error",h,!1);f(b,a)}if(d){var m="string"===typeof d?d:d.src;if(e.test(m))f.call(d,m);else{var y=c[m];if(y)f.call(d,y);else{var x=!1;"string"===
typeof d&&(d=k.createElement("img"),x=34===m.charCodeAt(0),d.src=x?m.substring(1,m.length-1):m);0<d.width||0<d.height||d.complete?g.call(d):(d.addEventListener("load",g,!1),d.addEventListener("abort",h,!1),d.addEventListener("error",h,!1))}}}else f()}}(),r=function(){var a=[],b=/\Wbackground[^;]+;/g;return{add:function(b){a.push(b)},test:function(b){do{if(-1!==a.indexOf(b))return!0;b=b.parentElement}while(b);return!1},clear:function(){for(var c;c=a.pop();){var e=c.parentElement;if(e)if(""===c.getAttribute("data-ic2s-ignore")){var d=
k.createElement("div"),f=c.getAttribute("data-ic2s-style")||"";d.setAttribute("data-ic2s-style",f.replace(b,"")+"background-color:blue");e.replaceChild(d,c)}else e.removeChild(c)}}}}(),u=function(){var a=function(){function a(b){if(b){b=b.split(";");for(var c=0;c<b.length;++c){var e=b[c],d=e.indexOf(":");0<d&&(this[e.substring(0,d).trim()]=e.substring(d+1).trim())}}}var b=function(){var a=/^"?blob:/;return function(b,c,e){var d=b.getPropertyValue(c);if("string"===typeof d&&"url("===d.substring(0,
4)&&(b=d.slice(4,-1),f.config.encodeImages||a.test(b))){m(b,function(a){e.call(this,c,a?"url("+a+")":d)});return}e.call(this,c,d)}}();a.prototype={fixURL:function(a,c,e){b.call(this,a,c,function(a,b){b&&(this[a]=b);e()})},toString:function(){var a="",b;for(b in this)this.hasOwnProperty(b)&&void 0!==this[b]&&(a+=b+":"+this[b]+";");return a},getPropertyValue:function(a){return this[a]},removeProperty:function(a){delete this[a]}};return a}(),b=function(){function a(b,c){var e=parseInt(b,10);return isNaN(e)?
b:e+c+"px"}var b=!1,c=!1,d=!1;return{need:function(a){b=-1!==a.position.indexOf("fixed");c="auto"===a.left&&"auto"!==a.right||"auto"===a.top&&"auto"!==a.bottom;d=-1!==a.display.search(/block|flex|grid/)&&"auto"!==a.width;return b||c||d},fix:function(f,g){if(c){g.position="absolute";var s=n.location(f);g.left=s.left+"px";g.right="auto";g.top=s.top+"px";g.bottom="auto"}b&&(g.position="absolute",g.left=a(g.left,e.scrollX),g.top=a(g.top,e.scrollY));d&&(s=parseFloat(g.width),g.width=Math.floor(1.012*s)+
"px")}}}(),c=/image$/,d=/; ?cursor:[^;]+/,g=/(-appearance)|(^(-|animation))/,h=/; ?(-|transition)[^;]+/g,t=/;[^:]+: ?(auto|normal);/g,l=""!==e.getComputedStyle(k.head).cssText?function(e,g,k,m,B){var n=m.cssText.replace(h,"").replace(t,";"),l=!f.config.encodeImages&&-1===n.indexOf("blob:");"A"===k&&(n=n.replace(d,""));if(!b.need(m)&&l)return e.setAttribute("data-ic2s-style",n),!0;var r=new a(n);b.fix(g,r);if(l)return e.setAttribute("data-ic2s-style",r.toString()),!0;q(m,function(a,b,e,d){if(!c.test(a))return!0;
r.fixURL(d,a,b);return!1},function(){e.setAttribute("data-ic2s-style",r.toString());return B.apply(this,arguments)});return!1}:function(c,e,d,f,k){var h=new a;q(f,function(a,b,c,e){if("cursor"===a&&"A"===d||g.test(a))return!0;if("position"===a)return a=e.position,h.position="fixed"===a||"sticky"===a?"absolute":a,!0;h.fixURL(e,a,b);return!1},function(){b.need(f)&&b.fix(e,h);c.setAttribute("data-ic2s-style",h.toString());return k.apply(this,arguments)});return!1};return function(a,b,c){var d=a.tagName;
if("OPTION"===d||"PARAM"===d||r.test(a))return!0;var f=e.getComputedStyle(b);if("none"===f.display)return r.add(a),!0;var g=b.getBoundingClientRect();return 0===g.width&&0===g.height?(a.setAttribute("data-ic2s-style","width:0; height:0; overflow:hidden"),!0):l(a,b,d,f,c)}}(),z=function(){var a="querySelectorAll"in k?function(a){return 0===a.querySelectorAll("script,iframe").length}:function(a){return 0===a.getElementsByTagName("SCRIPT").length&&0===a.getElementsByTagName("IFRAME").length};return function w(b){if(!b)return null;
var c=b.tagName;if("IFRAME"===c||"SCRIPT"===c)return k.createElement("span");if(a(b))return b.cloneNode(!0);c=b.cloneNode(!1);b=b.children;for(var e=b.length,d=0;d!==e;++d){var f=w(b[d]);f&&c.appendChild(f)}return c}}(),t=function(){var a=/\.\d+px/g,b=/data-ic2s-/g,c=/-webkit-cross-fade\(([^,]+)[^;]+/g,e=/\son\w+=(("[^"]+")|([^> \f\n\r\t\v]+))/gi;return function(d){return d.replace(a,"px").replace(b,"").replace(c,"$1").replace(e,"")}}();l.Style=function(a){function b(){for(var c="",e=k.styleSheets,
d=0;d!==e.length;++d){var f=e[d],g="";try{if(f.disabled)continue;g=f.media.mediaText;if(!window.matchMedia(g).matches)continue;var h=f.cssRules||f.rules;if(h){for(var n="",m=0;m!==h.length;++m){var l=h[m],t=l.selectorText;t&&-1!==t.indexOf(":")&&(n+=l.cssText+"\n")}n&&(c+="<style>\n"+n+"</style>\n");continue}}catch(A){}c+='<link rel="stylesheet" href="'+f.href+'" type="'+(f.type||"text/css")+'"'+(g?' media="'+g+'"':"")+">\n"}c&&a(c)}e.matchMedia||(e.matchMedia=function(){var a={matches:!0};return function(){return a}}());
b();return{reset:b,stop:n.noop}};l.DOM=function(){function a(){c=2}function b(a,e){var d=v();return{notifier:h.bind(null,a,function(a){function b(){var f=t(a.outerHTML);(f=d(f))?(e(f),c=1):++c}g?g(b):setTimeout(b,0)}),reset:function(){d=v()}}}var c=0;return function(d,h){p("DOM ctor");h=h||k.body;var n=b(h,d),m=n.notifier,l=Math.round(60/(f.config.updatesPerSecond||6)),t=c,r=g?function(){var a=function(){if(null===r)return 0;c=c<l?++c:l;++t>=c&&(t=0,m());return g(a)};return a()}():e.setInterval(m,
Math.round(1E3/(f.config.updatesPerSecond||6)));h.addEventListener("click",a,!0);var q;e.MutationObserver&&(q=new MutationObserver(a),q.observe(h===e?k.body:h,{attributes:!0,childList:!0,characterData:!0}));return{reset:n.reset,stop:function(){p("DOM stop");null!==r&&(g||e.clearInterval(r),r=null);h.removeEventListener("click",a,!0);q&&q.disconnect()}}}}();l.Geometry=function(a,b){function c(){0<=g[0]&&(a.apply(null,g),g[0]=-1)}function d(){h();c()}p("Geometry ctor");b=b||e;var g=[-1,-1,-1,-1],h=
b===e?n.getViewRect.bind(null,g):function(){n.getViewRect(g);var a=b.getBoundingClientRect();g[0]=Math.max(-a.left,0);g[1]=Math.max(-a.top,0);g[2]=Math.min(a.right,g[2])-Math.max(a.left,0);g[3]=Math.min(a.bottom,g[3])-Math.max(a.top,0)},m=setInterval(c,1E3/(f.config.updatesPerSecond||6));b.addEventListener("scroll",h,!1);b.addEventListener("resize",h,!1);d();return{reset:d,stop:function(){p("Geometry stop");clearInterval(m);b.removeEventListener("scroll",h,!1);b.removeEventListener("resize",h,!1)}}};
l.Focus=function(a,b){function c(){d(k.activeElement)}p("Focus ctor");b=b||k.body;var d=function(){var a;return function(b){b=b||e.event;b=b.target||b.srcElement||b;b!==a&&(a&&a.removeAttribute("data-ic2s-focus"),b.setAttribute("data-ic2s-focus","1"),a=b)}}();b.addEventListener("focusin",d,!1);b.addEventListener("focus",d,!0);c();return{reset:c,stop:function(){p("Focus stop");b.removeEventListener("focusin",d,!1);b.removeEventListener("focus",d,!0)}}};l.Visibility=function(){var a=n.Prop.getName(k,
"hidden");if(!a)return null;var b=a.replace(/hidden/i,"visibilitychange");return function(c){function e(){var b=k[a];b!==f&&(f=b,c(!b))}p("Visibility ctor");var f;e();k.addEventListener(b,e,!1);return{reset:function(){f=d;e()},stop:function(){p("Visibility stop");k.removeEventListener(b,e,!1)}}}}();l.Cursor=function(a){function b(a){a=a||e.event;g=a.pageX;h=a.pageY}function c(){g!==d&&(a(g,h),n=g,g=d)}p("Cursor ctor");var g,h,n,m=e.setInterval(c,Math.round(300/(f.config.updatesPerSecond||6)));k.addEventListener("mousemove",
b,!1);k.addEventListener("click",b,!1);return{reset:function(){g=n;c()},stop:function(){p("Cursor stop");k.removeEventListener("mousemove",b,!1);k.removeEventListener("click",b,!1);e.clearInterval(m)}}}})(ic2s||(ic2s={}),window,window.document);(function(f,e,k){var d=f.attach||(f.attach={}),a="ic2s-session-peer",b=f.log,c=b.CI,h=b.CL,l=f.utils,p=f.monitor;c("attach module");d.Monitors=function(){var a={geometry:p.Geometry,visibility:p.Visibility,Style:p.Style,DOM:p.DOM,focus:p.Focus,cursor:p.Cursor};return function(b,d){c("Monitors ctor");var g=Object.create(null),f=!1,h;b.on({start:function(e){c("Received handshake",e);b&&l.iter(a,function(a,c){g[a]=c(b.send.bind(b,a),d)})},reset:function(){c("Received reset");l.iter(g,function(a,b){b.reset()})},
stop:function(){c("Received stop");f=!0;u.stop();return u},cursor:function(a,b){var d;if(!h){c("Creating pointer");h=k.createElement("div");h.setAttribute("data-ic2s-ignore","none");h.className="ic2s-cursor";d=h.style;var f=e.getComputedStyle(h).position;f&&"static"!==f||(d.position="absolute",d.backgroundImage="url("+this.origin()+"/resources/iClickfinger144X144.png)",d.backgroundSize="contain",d.backgroundRepeat="no-repeat",d.top="0px",d.left="0px",d.width="44px",d.height="44px");d.zIndex=9999;
d.pointerEvents="none";k.body.appendChild(h)}l.position(h,a-4,b);return u}});var u=l.eventSource();b.delegate(u);u.stop=function(){if(b){c("Stopping session");l.iter(g,function(a,b){b.stop()});b.stop();b=null;if(h){var a=h.parentElement;a&&a.removeChild(h)}u.fire("stop",f)}};return u}}();d=f.api||(f.api={});(function(b){var d;b.start=function(c){function e(){h("Clearing id");l.sessionStorage.removeItem(a);d=null}if(!d&&(c=f.communication.socket("user",{transport:c}))){var m=k.getElementById("ic2s-monitor");
d=f.attach.Monitors(c,m);d.on({start:function(b,c){h("Saving transport",c);l.sessionStorage.setItem(a,c)},stop:e,none:e,error:e}).delegate(b)}};b.stop=function(){c("User stopped");d&&d.stop();l.sessionStorage.removeItem(a)};b.isActive=function(){return!!d};b.toggle=function(){d?b.stop():b.start()};b.button=function(){function a(b){for(var c=0;c!==f.length;++c){var d=f[c],e=d.getAttribute(b?"data-ic2s-alt":"data-ic2s-orig");if(e){var g=d.innerHTML;g?d.innerHTML=e:(g=d.value,d.value=e);b&&g!==e&&d.setAttribute("data-ic2s-orig",
g)}}}function c(a){var b=k.getElementById("ic2s-banner")||k.body,f=b.getAttribute("data-ic2s-"+a)||d[a]||a;a=parseInt(b.getAttribute("data-ic2s-duration"),10)||4E3;var g=k.createElement("div");g.setAttribute("data-ic2s-ignore","none");g.className="ic2s-banner";g.innerHTML=f;var f=g.style,h=e.getComputedStyle(g).position;h&&"static"!==h||(f.position="absolute",f.zIndex=1E3,f.color="white",f.backgroundColor="darkblue",f.padding="6px",f.border="2px solid white",b===k.body?(f.left=e.pageXOffset+e.innerWidth/
2+"px",f.top=e.pageYOffset+e.innerHeight/2+"px"):(f.left="50%",f.top="50%"),f[l.transformName()]="translate(-50%,-50%)");f.pointerEvents="none";b.appendChild(g);setTimeout(function(){b.removeChild(g)},a)}var d={start:"Browser tab shared",stop:"Browser tab sharing ended",none:"Support currently unavailable",error:"Failed to share browser tab"},f=[];return function(d){if(d&&(d.addEventListener("click",b.toggle,!1),1===f.push(d)))b.on({starting:a.bind(null,!0),start:c.bind(null,"start"),stop:function(){h("Update UI stop");
a(!1);c("stop")},none:function(){h("Update UI none");a(!1);c("none")},error:function(){a(!1);c("error")}})}}();(function g(){if("complete"!==k.readyState)e.addEventListener("load",g,!1);else{var a=k.getElementsByClassName("ic2s-button");if(a)for(var c=0;c<a.length;++c)b.button(a[c])}})();(function(){function d(){c("Auto connecting",f);setTimeout(function(){b.start(f)},0)}var f=l.sessionStorage.getItem(a);f&&("complete"===k.readyState?d():e.addEventListener("load",d,!1))})()})(d.v1||(d.v1=l.eventSource()));
f.loaded=!0;"function"===typeof e.ic2sLoaded&&e.ic2sLoaded(f);if("function"===typeof f.onload)f.onload()})(ic2s||(ic2s={}),window,window.document);
